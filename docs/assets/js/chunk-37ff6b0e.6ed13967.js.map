{"version":3,"sources":["webpack:///./src/views/main/map/leaflet/geoJson/geoJson.vue?4c78","webpack:///./src/views/main/map/leaflet/geoJson/map/WMTS.js","webpack:///./src/views/main/map/leaflet/geoJson/map/provideBaseLayer.js","webpack:///./src/views/main/map/leaflet/geoJson/mapMixins.js","webpack:///./src/views/main/map/leaflet/geoJson/index.js","webpack:///src/views/main/map/leaflet/geoJson/geoJson.vue","webpack:///./src/views/main/map/leaflet/geoJson/geoJson.vue?3315","webpack:///./src/views/main/map/leaflet/geoJson/geoJson.vue","webpack:///./src/views/main/map/leaflet/geoJson/geoJson.vue?2b36"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","model","value","spaceObj","callback","$$v","$set","expression","_l","item","key","id","name","on","handleChangeProvince","handleChangeCity","handleChangeCounty","staticRenderFns","WMTS","url","options","L","extend","defaultWmtsParams","service","request","version","layer","style","tilematrixset","format","initialize","_url","lOptions","cOptions","Object","keys","forEach","element","toLowerCase","wmtsParams","tileSize","i","detectRetina","retina","width","height","hasOwnProperty","matrixIds","getDefaultMatrix","onAdd","map","_crs","crs","prototype","call","getTileUrl","coords","nwPoint","multiplyBy","x","y","sePoint","add","zoom","_tileZoom","nw","project","_map","unproject","se","tilewidth","ident","identifier","tilematrix","X0","topLeftCorner","lng","Y0","lat","tilecol","Math","floor","tilerow","template","s","_getSubdomain","getParamString","setParams","params","noRedraw","redraw","matrixIds3857","Array","mapConfig","skyMap1","opt","tileMatrixSet","type","skyMap2","skymapTopography1","skymapTopography2","skymapImage1","blc","imageOption","mapMixins","data","mymap","mapLayer","editLayer","mergedGeowayData","geojson","methods","initMap","CRS","EPSG4326","zoomControl","attributionControl","center","minZoom","maxZoom","doubleClickZoom","featureGroup","addLayer","dealCoordinates","polylineData","areasArr","split","featuresArr","featuresItem","c","Number","push","initGeoJson","clearLayers","geoJson","weight","color","opacity","fillColor","fillOpacity","addTo","fitBounds","getBounds","mounted","mixins","nation","province","city","county","nationArr","provinceArr","cityArr","countyArr","queryWords","queryType","val","dealSelectChange","selectValue","index","getData","keywords","extensions","subdistrict","$get","then","res","info","districts","curNodeInfo","subNodeInfo","curPolylineData","polyline","subNodeData","adcode","$alert","catch","error","component"],"mappings":"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","file":"assets/js/chunk-37ff6b0e.6ed13967.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"geojson-container\"},[_c('div',{staticClass:\"map\",attrs:{\"id\":\"map\"}},[_c('div',{staticClass:\"left-content\"},[_c('div',{staticClass:\"common-title\"},[_vm._v(\"空间位置\")]),_c('div',{staticClass:\"space-location\"},[_c('div',{staticClass:\"flex space-line\"},[_c('div',{staticClass:\"space-title\"},[_vm._v(\"国家/地区：\")]),_c('div',{staticClass:\"space-select\"},[_c('el-select',{attrs:{\"size\":\"mini\",\"placeholder\":\"请选择\"},model:{value:(_vm.spaceObj.nation),callback:function ($$v) {_vm.$set(_vm.spaceObj, \"nation\", $$v)},expression:\"spaceObj.nation\"}},_vm._l((_vm.nationArr),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1)]),_c('div',{staticClass:\"flex space-line\"},[_c('div',{staticClass:\"space-title\"},[_vm._v(\"省/市/自治州：\")]),_c('div',{staticClass:\"space-select\"},[_c('el-select',{attrs:{\"size\":\"mini\",\"placeholder\":\"省/市/自治州\"},on:{\"change\":_vm.handleChangeProvince},model:{value:(_vm.spaceObj.province),callback:function ($$v) {_vm.$set(_vm.spaceObj, \"province\", $$v)},expression:\"spaceObj.province\"}},_vm._l((_vm.provinceArr),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1)]),_c('div',{staticClass:\"flex space-line\"},[_c('div',{staticClass:\"space-title\"},[_vm._v(\"地级市/州/盟：\")]),_c('div',{staticClass:\"space-select\"},[_c('el-select',{attrs:{\"size\":\"mini\",\"placeholder\":\"地级市/州/盟\"},on:{\"change\":_vm.handleChangeCity},model:{value:(_vm.spaceObj.city),callback:function ($$v) {_vm.$set(_vm.spaceObj, \"city\", $$v)},expression:\"spaceObj.city\"}},_vm._l((_vm.cityArr),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1)]),_c('div',{staticClass:\"flex space-line\"},[_c('div',{staticClass:\"space-title\"},[_vm._v(\"区/县级市/县：\")]),_c('div',{staticClass:\"space-select\"},[_c('el-select',{attrs:{\"size\":\"mini\",\"placeholder\":\"区/县级市/县\"},on:{\"change\":_vm.handleChangeCounty},model:{value:(_vm.spaceObj.county),callback:function ($$v) {_vm.$set(_vm.spaceObj, \"county\", $$v)},expression:\"spaceObj.county\"}},_vm._l((_vm.countyArr),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1)])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as L from 'leaflet';\r\n\r\nL.TileLayer.WMTS = L.TileLayer.extend({\r\n    defaultWmtsParams: {\r\n        service: 'WMTS',\r\n        request: 'GetTile',\r\n        version: '1.0.0',\r\n        layer: '',\r\n        style: '',\r\n        tilematrixset: '',\r\n        format: 'image/jpeg'\r\n    },\r\n    initialize: function(url, options) { // (String, Object)\r\n        this._url = url;\r\n        var lOptions = {};\r\n        var cOptions = Object.keys(options);\r\n        cOptions.forEach(element => {\r\n            lOptions[element.toLowerCase()] = options[element];\r\n        });\r\n        var wmtsParams = L.extend({}, this.defaultWmtsParams);\r\n        var tileSize = lOptions.tileSize || this.options.tileSize;\r\n        if (lOptions.detectRetina && L.Browser.retina) {\r\n            wmtsParams.width = wmtsParams.height = tileSize * 2;\r\n        } else {\r\n            wmtsParams.width = wmtsParams.height = tileSize;\r\n        }\r\n        for (var i in lOptions) {\r\n            // all keys that are in defaultWmtsParams options go to WMTS params\r\n            if (wmtsParams.hasOwnProperty(i) && i != \"matrixIds\") {\r\n                wmtsParams[i] = lOptions[i];\r\n            }\r\n        }\r\n        this.wmtsParams = wmtsParams;\r\n        this.matrixIds = options.matrixIds || this.getDefaultMatrix();\r\n        L.setOptions(this, options);\r\n    },\r\n    onAdd: function(map) {\r\n        this._crs = this.options.crs || map.options.crs;\r\n        L.TileLayer.prototype.onAdd.call(this, map);\r\n    },\r\n    getTileUrl: function(coords) { // (Point, Number) -> String\r\n        var tileSize = this.options.tileSize;\r\n        var nwPoint = coords.multiplyBy(tileSize);\r\n        nwPoint.x += 1;\r\n        nwPoint.y -= 1;\r\n        var sePoint = nwPoint.add(new L.Point(tileSize, tileSize));\r\n        var zoom = this._tileZoom;\r\n        var nw = this._crs.project(this._map.unproject(nwPoint, zoom));\r\n        var se = this._crs.project(this._map.unproject(sePoint, zoom));\r\n        var tilewidth = se.x - nw.x;\r\n        var ident = this.matrixIds[zoom].identifier;\r\n        var tilematrix = ident;\r\n        var X0 = this.matrixIds[zoom].topLeftCorner.lng;\r\n        var Y0 = this.matrixIds[zoom].topLeftCorner.lat;\r\n        var tilecol = Math.floor((nw.x - X0) / tilewidth);\r\n        var tilerow = -Math.floor((nw.y - Y0) / tilewidth);\r\n        var url = L.Util.template(this._url, { s: this._getSubdomain(coords) });\r\n        return url + L.Util.getParamString(this.wmtsParams, url) + \"&tilematrix=\" + tilematrix +\r\n            \"&tilerow=\" + tilerow + \"&tilecol=\" + tilecol;\r\n    },\r\n    setParams: function(params, noRedraw) {\r\n        L.extend(this.wmtsParams, params);\r\n        if (!noRedraw) {\r\n            this.redraw();\r\n        }\r\n        return this;\r\n    },\r\n    getDefaultMatrix: function() {\r\n        /**\r\n         * the matrix3857 represents the projection\r\n         * for in the IGN WMTS for the google coordinates.\r\n         */\r\n        var matrixIds3857 = new Array(22);\r\n        for (var i = 0; i < 22; i++) {\r\n            matrixIds3857[i] = {\r\n                identifier: 1 + i,\r\n                topLeftCorner: new L.LatLng(90, -180)\r\n            };\r\n        }\r\n        return matrixIds3857;\r\n    }\r\n});\r\nexport function WMTS(url, options) {\r\n    return new L.TileLayer.WMTS(url, options);\r\n}","import { WMTS } from './WMTS';\r\n\r\nconst mapConfig = {\r\n    //地图 - 矢量\r\n    skyMap1: {\r\n        url: \"http://t0.tianditu.gov.cn/vec_c/wmts?tk=5f62055ba4a942589b724283706c399a\",\r\n        opt: {\r\n            layer: \"vec\",\r\n            tileMatrixSet: \"c\",\r\n            format: \"tiles\",\r\n            style: \"default\",\r\n            type: \"baseLayer\",\r\n        }\r\n    },\r\n    skyMap2: {\r\n        url: \"http://t0.tianditu.gov.cn/cva_c/wmts?tk=5f62055ba4a942589b724283706c399a\",\r\n        opt: {\r\n            layer: \"cva\",\r\n            tileMatrixSet: \"c\",\r\n            format: \"tiles\",\r\n            style: \"default\",\r\n            type: \"baseLayer\",\r\n        }\r\n    },\r\n    // 天地图之地形的配置\r\n    skymapTopography1: {\r\n        url: \"http://t0.tianditu.gov.cn/ter_c/wmts?tk=5f62055ba4a942589b724283706c399a\",\r\n        opt: {\r\n            layer: \"ter\",\r\n            tileMatrixSet: \"c\",\r\n            format: \"tiles\",\r\n            style: \"default\",\r\n            type: \"baseLayer\"\r\n        }\r\n    },\r\n    skymapTopography2: {\r\n        url: \"http://t0.tianditu.gov.cn/cta_c/wmts?tk=5f62055ba4a942589b724283706c399a\",\r\n        opt: {\r\n            layer: \"cta\",\r\n            tileMatrixSet: \"c\",\r\n            format: \"tiles\",\r\n            style: \"default\",\r\n            type: \"baseLayer\"\r\n        }\r\n    },\r\n    // 天地图之影像的配置\r\n    skymapImage1: {\r\n        url: \"http://t0.tianditu.gov.cn/img_c/wmts?tk=5f62055ba4a942589b724283706c399a\",\r\n        opt: {\r\n            layer: \"img\",\r\n            tileMatrixSet: \"c\",\r\n            format: \"tiles\",\r\n            style: \"default\",\r\n            type: \"baseLayer\"\r\n        },\r\n        blc: 0,\r\n        identifier: 1, //比例尺\r\n        type: 'WMTS' //WMTS方式加载\r\n    }\r\n};\r\n\r\nlet skyMap1 = mapConfig.skyMap1,\r\n    skyMap2 = mapConfig.skyMap2,\r\n    skymapTopography1 = mapConfig.skymapTopography1,\r\n    skymapTopography2 = mapConfig.skymapTopography2;\r\n\r\nlet imageOption = {\r\n    // 地图\r\n    skyMap1: WMTS(skyMap1.url, skyMap1.opt),\r\n    skyMap2: WMTS(skyMap2.url, skyMap2.opt),\r\n    skymapTopography1: WMTS(skymapTopography1.url, skymapTopography1.opt),\r\n    skymapTopography2: WMTS(skymapTopography2.url, skymapTopography2.opt),\r\n};\r\n\r\nexport {\r\n    mapConfig,\r\n    imageOption\r\n};","import L from 'leaflet';\r\nimport { imageOption } from './map/provideBaseLayer.js';\r\n\r\nexport const mapMixins = {\r\n    data() {\r\n        return {\r\n            // 地图部分\r\n            mymap: null,\r\n            mapLayer: null,\r\n            editLayer: null,\r\n            mergedGeowayData: '',\r\n            geojson: null,\r\n        }\r\n    },\r\n    methods: {\r\n        initMap() {\r\n            this.mymap = L.map('map', {\r\n                crs: L.CRS.EPSG4326,\r\n                zoomControl: false,\r\n                attributionControl: false,\r\n                center: [36.982253, 106.1312172],\r\n                // center: [37.8, -96],\r\n                zoom: 4,\r\n                minZoom: 1,\r\n                maxZoom: 14,\r\n                doubleClickZoom: false,\r\n                // doubleClickZoom: false,\r\n            });\r\n\r\n            // 底图\r\n            this.mapLayer = L.featureGroup();\r\n            this.mymap.addLayer(this.mapLayer);\r\n\r\n            // 在底图上添加底图图片\r\n            this.mapLayer.addLayer(imageOption.skyMap1);\r\n            this.mapLayer.addLayer(imageOption.skyMap2);\r\n\r\n            // // 可编辑图层， 后续的操作在可编辑图层上操作\r\n            this.editLayer = L.featureGroup();\r\n            this.mymap.addLayer(this.editLayer);\r\n\r\n            // this.mymap.on('click', this.onMapClick);\r\n            // this.mymap.on('mousemove', this.onMapMousemove);\r\n            // this.mymap.on('mouseup', this.onMapMouseup);\r\n\r\n        },\r\n        dealCoordinates(polylineData) {\r\n            let areasArr = polylineData.split('|');\r\n            let featuresArr = [];\r\n            areasArr.forEach(item => {\r\n                let featuresItem = item.split(';');\r\n                featuresItem = featuresItem.map(item => {\r\n                    let c = item.split(',');\r\n                    return [Number(c[0]), Number(c[1])]\r\n                });\r\n                featuresArr.push({\r\n                    \"type\": \"Feature\",\r\n                    \"properties\": {},\r\n                    \"geometry\": {\r\n                        \"type\": \"Polygon\",\r\n                        \"coordinates\": [\r\n                            featuresItem\r\n                        ]\r\n                    }\r\n                });\r\n            });\r\n            return {\r\n                \"type\": \"FeatureCollection\",\r\n                \"features\": featuresArr\r\n            };\r\n        },\r\n        initGeoJson(polylineData) {\r\n            let data = this.dealCoordinates(polylineData);\r\n            this.editLayer.clearLayers();\r\n            this.geojson = L.geoJson(data, {\r\n                style: {\r\n                    weight: 1,\r\n                    color: '#f00',\r\n                    opacity: 0.9,\r\n                    // dashArray: '3',  //续签\r\n                    fillColor: '#f00',\r\n                    fillOpacity: 0.2\r\n                },\r\n                // onEachFeature: this.onEachFeature\r\n            }).addTo(this.editLayer);\r\n\r\n            this.mymap.fitBounds(this.geojson.getBounds())\r\n        }\r\n\r\n    },\r\n    mounted() {\r\n        this.initMap();\r\n    }\r\n};","import { mapMixins } from './mapMixins.js';\r\n\r\nexport default {\r\n    mixins: [mapMixins],\r\n    data() {\r\n        return {\r\n            // 空间位置的变量\r\n            spaceObj: {\r\n                nation: '100000',\r\n                province: '',\r\n                city: '',\r\n                county: ''\r\n            },\r\n            nationArr: [{ id: '100000', name: '中国人民共和国' }],\r\n            provinceArr: [],\r\n            cityArr: [],\r\n            countyArr: [],\r\n            // 查询行政边界\r\n            queryWords: '中国',\r\n            queryType: 1, //1->国家，2->省，3->市，4->县\r\n\r\n        }\r\n    },\r\n    methods: {\r\n        handleChangeProvince(val) {\r\n            this.dealSelectChange(2, val);\r\n        },\r\n        handleChangeCity(val) {\r\n            this.dealSelectChange(3, val);\r\n        },\r\n        handleChangeCounty(val) {\r\n            this.dealSelectChange(4, val);\r\n        },\r\n        dealSelectChange(queryType, selectValue) {\r\n            // debugger\r\n            this.queryType = queryType;\r\n            Object.keys(this.spaceObj).forEach((item, index) => {\r\n                if (queryType <= index) {\r\n                    this.spaceObj[item] = '';\r\n                    this[item + 'Arr'] = [];\r\n                }\r\n            });\r\n            this.getData(selectValue);\r\n        },\r\n        getData(queryWords) {\r\n            let url = 'https://restapi.amap.com/v3/config/district';\r\n            let data = {\r\n                key: '8000598fe21bff154bb4fd0cfd117d68',\r\n                keywords: queryWords || '中国',\r\n                extensions: 'all',\r\n                subdistrict: 1,\r\n            }\r\n            this.$get(url, data).then((res) => {\r\n                if (res.info == 'OK') {\r\n                    let districts = res.districts;\r\n                    let curNodeInfo = districts[0];\r\n                    let subNodeInfo = curNodeInfo.districts;\r\n                    let curPolylineData = curNodeInfo.polyline; //当前节点的多边形坐标集合\r\n                    this.initGeoJson(curPolylineData);\r\n\r\n                    let subNodeData = subNodeInfo.map(item => {\r\n                        return { ...item, ...{ id: item.adcode, name: item.name } }\r\n                    });\r\n                    // 国家\r\n                    if (this.queryType === 1) {\r\n                        this.provinceArr = subNodeData;\r\n                    } else {\r\n                        Object.keys(this.spaceObj).forEach((item, index) => {\r\n                            if (this.queryType == index) {\r\n                                this[item + 'Arr'] = subNodeData;\r\n                            }\r\n                        });\r\n                    }\r\n                } else {\r\n                    this.$alert(res.info, '提示');\r\n                }\r\n            }).catch((error) => {\r\n                debugger\r\n                // console.log(error);\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getData();\r\n    }\r\n}","<template>\r\n    <div class=\"geojson-container\">\r\n        <div class=\"map\" id=\"map\">\r\n            <!-- 左边的容器 -->\r\n            <div class=\"left-content\">\r\n                <div class=\"common-title\">空间位置</div>\r\n                <div class=\"space-location\">\r\n                    <div class=\"flex space-line\">\r\n                        <div class=\"space-title\">国家/地区：</div>\r\n                        <div class=\"space-select\">\r\n                            <el-select size=\"mini\" v-model=\"spaceObj.nation\" placeholder=\"请选择\">\r\n                                <el-option v-for=\"item in nationArr\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"flex space-line\">\r\n                        <div class=\"space-title\">省/市/自治州：</div>\r\n                        <div class=\"space-select\">\r\n                            <el-select size=\"mini\" v-model=\"spaceObj.province\" placeholder=\"省/市/自治州\"\r\n                                @change=\"handleChangeProvince\">\r\n                                <el-option v-for=\"item in provinceArr\" :key=\"item.id\" :label=\"item.name\"\r\n                                    :value=\"item.id\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"flex space-line\">\r\n                        <div class=\"space-title\">地级市/州/盟：</div>\r\n                        <div class=\"space-select\">\r\n                            <el-select size=\"mini\" v-model=\"spaceObj.city\" placeholder=\"地级市/州/盟\"\r\n                                @change=\"handleChangeCity\">\r\n                                <el-option v-for=\"item in cityArr\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"flex space-line\">\r\n                        <div class=\"space-title\">区/县级市/县：</div>\r\n                        <div class=\"space-select\">\r\n                            <el-select size=\"mini\" v-model=\"spaceObj.county\" placeholder=\"区/县级市/县\"\r\n                                @change=\"handleChangeCounty\">\r\n                                <el-option v-for=\"item in countyArr\" :key=\"item.id\" :label=\"item.name\" :value=\"item.id\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import _script from './index.js';\r\n    export default _script;\r\n</script>\r\n\r\n<style lang=\"less\">\r\n    @import url('style.less');\r\n</style>","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./geoJson.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./geoJson.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./geoJson.vue?vue&type=template&id=970a4914&\"\nimport script from \"./geoJson.vue?vue&type=script&lang=js&\"\nexport * from \"./geoJson.vue?vue&type=script&lang=js&\"\nimport style0 from \"./geoJson.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./geoJson.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}