(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37ff6b0e"],{"0de3":function(t,e,a){},"154b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"geojson-container"},[a("div",{staticClass:"map",attrs:{id:"map"}},[a("div",{staticClass:"left-content"},[a("div",{staticClass:"common-title"},[t._v("空间位置")]),a("div",{staticClass:"space-location"},[a("div",{staticClass:"flex space-line"},[a("div",{staticClass:"space-title"},[t._v("国家/地区：")]),a("div",{staticClass:"space-select"},[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:t.spaceObj.nation,callback:function(e){t.$set(t.spaceObj,"nation",e)},expression:"spaceObj.nation"}},t._l(t.nationArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)]),a("div",{staticClass:"flex space-line"},[a("div",{staticClass:"space-title"},[t._v("省/市/自治州：")]),a("div",{staticClass:"space-select"},[a("el-select",{attrs:{size:"mini",placeholder:"省/市/自治州"},on:{change:t.handleChangeProvince},model:{value:t.spaceObj.province,callback:function(e){t.$set(t.spaceObj,"province",e)},expression:"spaceObj.province"}},t._l(t.provinceArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)]),a("div",{staticClass:"flex space-line"},[a("div",{staticClass:"space-title"},[t._v("地级市/州/盟：")]),a("div",{staticClass:"space-select"},[a("el-select",{attrs:{size:"mini",placeholder:"地级市/州/盟"},on:{change:t.handleChangeCity},model:{value:t.spaceObj.city,callback:function(e){t.$set(t.spaceObj,"city",e)},expression:"spaceObj.city"}},t._l(t.cityArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)]),a("div",{staticClass:"flex space-line"},[a("div",{staticClass:"space-title"},[t._v("区/县级市/县：")]),a("div",{staticClass:"space-select"},[a("el-select",{attrs:{size:"mini",placeholder:"区/县级市/县"},on:{change:t.handleChangeCounty},model:{value:t.spaceObj.county,callback:function(e){t.$set(t.spaceObj,"county",e)},expression:"spaceObj.county"}},t._l(t.countyArr,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)])])])])])},s=[],n=(a("4160"),a("d81d"),a("b0c0"),a("b64b"),a("159b"),a("5530")),r=(a("a9e3"),a("ac1f"),a("1276"),a("e11e")),o=a.n(r);function l(t,e){return new r["TileLayer"].WMTS(t,e)}r["TileLayer"].WMTS=r["TileLayer"].extend({defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.0.0",layer:"",style:"",tilematrixset:"",format:"image/jpeg"},initialize:function(t,e){this._url=t;var a={},i=Object.keys(e);i.forEach((function(t){a[t.toLowerCase()]=e[t]}));var s=r["extend"]({},this.defaultWmtsParams),n=a.tileSize||this.options.tileSize;for(var o in a.detectRetina&&r["Browser"].retina?s.width=s.height=2*n:s.width=s.height=n,a)s.hasOwnProperty(o)&&"matrixIds"!=o&&(s[o]=a[o]);this.wmtsParams=s,this.matrixIds=e.matrixIds||this.getDefaultMatrix(),r["setOptions"](this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,r["TileLayer"].prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this.options.tileSize,a=t.multiplyBy(e);a.x+=1,a.y-=1;var i=a.add(new r["Point"](e,e)),s=this._tileZoom,n=this._crs.project(this._map.unproject(a,s)),o=this._crs.project(this._map.unproject(i,s)),l=o.x-n.x,c=this.matrixIds[s].identifier,p=c,u=this.matrixIds[s].topLeftCorner.lng,d=this.matrixIds[s].topLeftCorner.lat,y=Math.floor((n.x-u)/l),h=-Math.floor((n.y-d)/l),m=r["Util"].template(this._url,{s:this._getSubdomain(t)});return m+r["Util"].getParamString(this.wmtsParams,m)+"&tilematrix="+p+"&tilerow="+h+"&tilecol="+y},setParams:function(t,e){return r["extend"](this.wmtsParams,t),e||this.redraw(),this},getDefaultMatrix:function(){for(var t=new Array(22),e=0;e<22;e++)t[e]={identifier:1+e,topLeftCorner:new r["LatLng"](90,-180)};return t}});var c={skyMap1:{url:"http://t0.tianditu.gov.cn/vec_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"vec",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skyMap2:{url:"http://t0.tianditu.gov.cn/cva_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"cva",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapTopography1:{url:"http://t0.tianditu.gov.cn/ter_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"ter",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapTopography2:{url:"http://t0.tianditu.gov.cn/cta_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"cta",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapImage1:{url:"http://t0.tianditu.gov.cn/img_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"img",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"},blc:0,identifier:1,type:"WMTS"}},p=c.skyMap1,u=c.skyMap2,d=c.skymapTopography1,y=c.skymapTopography2,h={skyMap1:l(p.url,p.opt),skyMap2:l(u.url,u.opt),skymapTopography1:l(d.url,d.opt),skymapTopography2:l(y.url,y.opt)},m={data:function(){return{mymap:null,mapLayer:null,editLayer:null,mergedGeowayData:"",geojson:null}},methods:{initMap:function(){this.mymap=o.a.map("map",{crs:o.a.CRS.EPSG4326,zoomControl:!1,attributionControl:!1,center:[36.982253,106.1312172],zoom:4,minZoom:1,maxZoom:14,doubleClickZoom:!1}),this.mapLayer=o.a.featureGroup(),this.mymap.addLayer(this.mapLayer),this.mapLayer.addLayer(h.skyMap1),this.mapLayer.addLayer(h.skyMap2),this.editLayer=o.a.featureGroup(),this.mymap.addLayer(this.editLayer)},dealCoordinates:function(t){var e=t.split("|"),a=[];return e.forEach((function(t){var e=t.split(";");e=e.map((function(t){var e=t.split(",");return[Number(e[0]),Number(e[1])]})),a.push({type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[e]}})})),{type:"FeatureCollection",features:a}},initGeoJson:function(t){var e=this.dealCoordinates(t);this.editLayer.clearLayers(),this.geojson=o.a.geoJson(e,{style:{weight:1,color:"#f00",opacity:.9,fillColor:"#f00",fillOpacity:.2}}).addTo(this.editLayer),this.mymap.fitBounds(this.geojson.getBounds())}},mounted:function(){this.initMap()}},f={mixins:[m],data:function(){return{spaceObj:{nation:"100000",province:"",city:"",county:""},nationArr:[{id:"100000",name:"中国人民共和国"}],provinceArr:[],cityArr:[],countyArr:[],queryWords:"中国",queryType:1}},methods:{handleChangeProvince:function(t){this.dealSelectChange(2,t)},handleChangeCity:function(t){this.dealSelectChange(3,t)},handleChangeCounty:function(t){this.dealSelectChange(4,t)},dealSelectChange:function(t,e){var a=this;this.queryType=t,Object.keys(this.spaceObj).forEach((function(e,i){t<=i&&(a.spaceObj[e]="",a[e+"Arr"]=[])})),this.getData(e)},getData:function(t){var e=this,a="https://restapi.amap.com/v3/config/district",i={key:"8000598fe21bff154bb4fd0cfd117d68",keywords:t||"中国",extensions:"all",subdistrict:1};this.$get(a,i).then((function(t){if("OK"==t.info){var a=t.districts,i=a[0],s=i.districts,r=i.polyline;e.initGeoJson(r);var o=s.map((function(t){return Object(n["a"])(Object(n["a"])({},t),{id:t.adcode,name:t.name})}));1===e.queryType?e.provinceArr=o:Object.keys(e.spaceObj).forEach((function(t,a){e.queryType==a&&(e[t+"Arr"]=o)}))}else e.$alert(t.info,"提示")})).catch((function(t){}))}},mounted:function(){this.getData()}},v=f,b=v,g=(a("4a20"),a("2877")),C=Object(g["a"])(b,i,s,!1,null,null,null);e["default"]=C.exports},"4a20":function(t,e,a){"use strict";a("0de3")}}]);
//# sourceMappingURL=chunk-37ff6b0e.5815afa0.js.map