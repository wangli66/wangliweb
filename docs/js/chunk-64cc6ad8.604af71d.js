(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64cc6ad8"],{"1f32":function(t,e,a){},2861:function(t,e,a){"use strict";a("4576")},"403e":function(t,e,a){},4576:function(t,e,a){},4821:function(t,e,a){"use strict";a("9e5e")},"871f":function(t,e,a){"use strict";a("403e")},"9e5e":function(t,e,a){},"9f76":function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("4160"),a("b64b"),a("159b");var i=a("e11e");function r(t,e){return new i["TileLayer"].WMTS(t,e)}i["TileLayer"].WMTS=i["TileLayer"].extend({defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.0.0",layer:"",style:"",tilematrixset:"",format:"image/jpeg"},initialize:function(t,e){this._url=t;var a={},r=Object.keys(e);r.forEach((function(t){a[t.toLowerCase()]=e[t]}));var n=i["extend"]({},this.defaultWmtsParams),s=a.tileSize||this.options.tileSize;for(var o in a.detectRetina&&i["Browser"].retina?n.width=n.height=2*s:n.width=n.height=s,a)n.hasOwnProperty(o)&&"matrixIds"!=o&&(n[o]=a[o]);this.wmtsParams=n,this.matrixIds=e.matrixIds||this.getDefaultMatrix(),i["setOptions"](this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,i["TileLayer"].prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this.options.tileSize,a=t.multiplyBy(e);a.x+=1,a.y-=1;var r=a.add(new i["Point"](e,e)),n=this._tileZoom,s=this._crs.project(this._map.unproject(a,n)),o=this._crs.project(this._map.unproject(r,n)),l=o.x-s.x,u=this.matrixIds[n].identifier,c=u,p=this.matrixIds[n].topLeftCorner.lng,f=this.matrixIds[n].topLeftCorner.lat,y=Math.floor((s.x-p)/l),h=-Math.floor((s.y-f)/l),m=i["Util"].template(this._url,{s:this._getSubdomain(t)});return m+i["Util"].getParamString(this.wmtsParams,m)+"&tilematrix="+c+"&tilerow="+h+"&tilecol="+y},setParams:function(t,e){return i["extend"](this.wmtsParams,t),e||this.redraw(),this},getDefaultMatrix:function(){for(var t=new Array(22),e=0;e<22;e++)t[e]={identifier:1+e,topLeftCorner:new i["LatLng"](90,-180)};return t}});var n={skymapVec1:{url:"http://t0.tianditu.gov.cn/vec_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"vec",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapVec2:{url:"http://t0.tianditu.gov.cn/cva_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"cva",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapTopography1:{url:"http://t0.tianditu.gov.cn/ter_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"ter",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapTopography2:{url:"http://t0.tianditu.gov.cn/cta_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"cta",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapImage1:{url:"http://t0.tianditu.gov.cn/img_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"img",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapImage2:{url:"http://t0.tianditu.gov.cn/cia_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"cia",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}}},s={};Object.keys(n).forEach((function(t){s[t]=r(n[t].url,n[t].opt)}))},ba4a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"300px"}},[a("leaflet-map",{ref:"leafletMap",attrs:{zoomControl:!1}},[a("leaflet-base-layer",{ref:"leafletBaseLayer"}),a("leaflet-edit-layer")],1)],1)},r=[],n=a("d011"),s=a("fb86"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"self-leaflet-edit-layer"})},l=[],u={data:function(){return{parentMap:null,editLayer:null}},methods:{},mounted:function(){this.parentMap=this.$parent,this.editLayer=this.parentMap.getBaseLayer()}},c={data:function(){return{parentMap:null,editLayer:null}},methods:{},mounted:function(){this.parentMap=this.$parent,this.editLayer=this.parentMap.getBaseLayer()}},p={mixins:[c,u],data:function(){return{name:"name"}}},f=p,y=(a("871f"),a("2877")),h=Object(y["a"])(f,o,l,!1,null,null,null),m=h.exports,d={components:{leafletMap:n["a"],leafletBaseLayer:s["a"],leafletEditLayer:m},data:function(){return{name:"name"}}},b=d,L=b,g=(a("2861"),Object(y["a"])(L,i,r,!1,null,"464bf735",null));e["default"]=g.exports},d011:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"leaflet-map-container",class:t.defaultClass,style:t.defaultStyle,attrs:{id:t.id}},[t.ready?t._t("default"):t._e()],2)},r=[],n=(a("e11e"),a("d81d"),a("9f76"),{data:function(){return{originOptions:{crs:L.CRS.EPSG4326,zoomControl:!0,attributionControl:!1,center:[36.982253,106.1312172],zoom:4,minZoom:1,maxZoom:14,doubleClickZoom:!1},options:{},timer:null,timerNum:0,mymap:null,baseLayer:null,editLayer:null}},methods:{initMap:function(){this.mymap=L.map("map",this.options),this.baseLayer=L.featureGroup(),this.mymap.addLayer(this.baseLayer),this.editLayer=L.featureGroup(),this.mymap.addLayer(this.editLayer)},ensureMapDom:function(){var t=this,e=this.id,a=document.getElementById(e);a?this.initMap():this.$nextTick((function(){if(t.timerNum>=10)return!1;t.timer((function(){t.ensureMapDom(),t.timerNum++}),100)}))}},mounted:function(){this.options=L.extend({},this.originOptions,this.$attrs),this.ensureMapDom()},beforeDestroy:function(){this.timer&&clearTimeout(this.timer),this.mymap&&this.mymap.remove()}}),s={inheritAttrs:!1,mixins:[n],props:{id:{type:String,default:"map",require:!0},defaultStyle:{default:function(){return{border:"1px solid #ccc"}}},defaultClass:{default:function(){return""}}},data:function(){return{ready:!1}},methods:{getMap:function(){return this.mymap},getBaseLayer:function(){return this.baseLayer},getEditLayer:function(){return this.editLayer},getAllLayer:function(){return{map:this.mymap,baseLayer:this.baseLayer,editLayer:this.editLayer}}},mounted:function(){this.ready=!0,this.$emit("ready",this.mymap)}},o=s,l=o,u=(a("d098"),a("2877")),c=Object(u["a"])(l,i,r,!1,null,null,null);e["a"]=c.exports},d098:function(t,e,a){"use strict";a("1f32")},fb86:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"self-leaflet-base-layer",style:t.baseStyle},[this.showChangeBtn?t._l(t.showChangeBtnArr,(function(e,i){return a("div",{key:"baseType-"+i,staticClass:"base-layer-btn",on:{click:function(a){return t.handleChangeBase(e)}}},[t._t(e,[a("div",{staticClass:"btn-image",class:["btn-image-"+e,t.currentBaseType==e?"current-active":""]},[a("div",{staticClass:"btn-txt"},[t._v(t._s(t.baseLayerType[e]))])])],{scope:e})],2)})):t._e()],2)},r=[],n=(a("4de4"),a("9f76")),s={data:function(){return{parentMap:null,baseLayer:null}},methods:{changeBaseType:function(t){this.baseLayer.clearLayers(),n["a"][t]&&this.baseLayer.addLayer(n["a"][t]),n["a"][t+"1"]&&this.baseLayer.addLayer(n["a"][t+"1"]),n["a"][t+"2"]&&this.baseLayer.addLayer(n["a"][t+"2"])}},mounted:function(){this.parentMap=this.$parent,this.baseLayer=this.parentMap.getBaseLayer()}},o={mixins:[s],name:"baseLayer",props:{baseStyle:{default:function(){return{position:"absolute",right:"10px",top:"10px"}}},showChangeBtn:{default:!1},baseType:{type:Array,default:function(){return["skymapVec"]}}},data:function(){return{baseLayerType:{skymapVec:"矢量",skymapTopography:"地形",skymapImage:"影像"},currentBaseType:""}},computed:{showChangeBtnArr:function(){var t=this;return this.baseType.filter((function(e){return t.baseLayerType[e]}))}},methods:{handleChangeBase:function(t){this.currentBaseType=t,this.changeBaseType(t)},getBaseLayer:function(){return this.baseLayer}},mounted:function(){if(this.showChangeBtnArr.length>0){var t=this.showChangeBtnArr[0];this.currentBaseType=t,this.changeBaseType(t)}else this.$alert("请传入有效的底图类型","提示")}},l=o,u=(a("4821"),a("2877")),c=Object(u["a"])(l,i,r,!1,null,null,null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-64cc6ad8.604af71d.js.map