(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-459d9a7c"],{"07e6":function(t,e,a){"use strict";a("4022")},"132d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"pad-6"},[a("el-popover",{attrs:{placement:"right",trigger:"click"}},[a("div",[a("pre",{staticClass:"pre-detail-small"},[t._v("1、用法可参考本页面的案例\n2、支持leaflet的本身方法的调用，具体可参考leaflet的说明文档\n   例如：let mapObject = this.$refs.leafletMap.getMap(); //可以获取map对象，\n        // 使用 mapObject.XXX调用leaflet方法；\n        // 例如：\n        mapObject.setZoom(2);\n3、leaflet-map的属性参数说明：\n    id: 字符串，选填，若一个页面需要展示多个地图，则必须传入多个id\n    defaultStyle: 对象，选填，添加在leaflet容器的样式\n    defaultClass: 字符串或对象，选填 多个class中间用空格\n    剩下的leaflet的参数option的属性当做vue组件属性如数传入，比如{zoom:XX,minZoom:XX,maxZoom:XX,}等\n4、leaflet-base-layer的属性参数说明\n    baseType: 数组 ，选填，若不传，默认显示矢量；\n              目前支持天地图的矢量，地形和 影像 ['skymapVec', 'skymapTopography', 'skymapImage']\n              传入数组 矢量skymapVec    地形skymapTopography    影像skymapImage\n    showChangeBtn: 布尔类型，选填，是否显示切换地图的按钮，默认不显示\n5、获取底图的图层，然后可以用baseLayerObject调用leaflet原来的所有操作底图的方法\n   例如：let baseLayerObject = this.$refs.leafletBaseLayer.getBaseLayer();\n         // 使用 baseLayerObject.XXX调用leaflet方法；\n                ")])]),a("el-button",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v("查看用法详情")])],1),a("el-button",{attrs:{size:"mini"},on:{click:t.test}},[t._v("缩小")]),a("el-button",{attrs:{size:"mini"},on:{click:t.test2}},[t._v("放大")])],1),a("div",{staticStyle:{height:"300px"}},[a("leaflet-map",{ref:"leafletMap",attrs:{zoom:4}},[a("leaflet-base-layer",{ref:"leafletBaseLayer",attrs:{showChangeBtn:!0,baseType:["skymapVec","skymapTopography","skymapImage"]}})],1)],1)])},r=[],s=a("d011"),n=a("fb86"),o={components:{leafletMap:s["a"],leafletBaseLayer:n["a"]},data:function(){return{name:"name",crs:L.CRS.EPSG4326,zoomControl:!0,attributionControl:!0,center:[36.982253,106.1312172],zoom:6,minZoom:1,maxZoom:14}},methods:{test:function(){var t=this.$refs.leafletMap.getMap(),e=t.getZoom();--e,t.setZoom(e)},test2:function(){var t=this.$refs.leafletMap.getMap(),e=t.getZoom();++e,t.setZoom(e)}}},l=o,c=l,u=(a("07e6"),a("2877")),m=Object(u["a"])(c,i,r,!1,null,null,null);e["default"]=m.exports},"1f32":function(t,e,a){},4022:function(t,e,a){},4821:function(t,e,a){"use strict";a("9e5e")},"9e5e":function(t,e,a){},"9f76":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("4160"),a("b64b"),a("159b");var i=a("e11e");function r(t,e){return new i["TileLayer"].WMTS(t,e)}i["TileLayer"].WMTS=i["TileLayer"].extend({defaultWmtsParams:{service:"WMTS",request:"GetTile",version:"1.0.0",layer:"",style:"",tilematrixset:"",format:"image/jpeg"},initialize:function(t,e){this._url=t;var a={},r=Object.keys(e);r.forEach((function(t){a[t.toLowerCase()]=e[t]}));var s=i["extend"]({},this.defaultWmtsParams),n=a.tileSize||this.options.tileSize;for(var o in a.detectRetina&&i["Browser"].retina?s.width=s.height=2*n:s.width=s.height=n,a)s.hasOwnProperty(o)&&"matrixIds"!=o&&(s[o]=a[o]);this.wmtsParams=s,this.matrixIds=e.matrixIds||this.getDefaultMatrix(),i["setOptions"](this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,i["TileLayer"].prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this.options.tileSize,a=t.multiplyBy(e);a.x+=1,a.y-=1;var r=a.add(new i["Point"](e,e)),s=this._tileZoom,n=this._crs.project(this._map.unproject(a,s)),o=this._crs.project(this._map.unproject(r,s)),l=o.x-n.x,c=this.matrixIds[s].identifier,u=c,m=this.matrixIds[s].topLeftCorner.lng,p=this.matrixIds[s].topLeftCorner.lat,y=Math.floor((n.x-m)/l),f=-Math.floor((n.y-p)/l),h=i["Util"].template(this._url,{s:this._getSubdomain(t)});return h+i["Util"].getParamString(this.wmtsParams,h)+"&tilematrix="+u+"&tilerow="+f+"&tilecol="+y},setParams:function(t,e){return i["extend"](this.wmtsParams,t),e||this.redraw(),this},getDefaultMatrix:function(){for(var t=new Array(22),e=0;e<22;e++)t[e]={identifier:1+e,topLeftCorner:new i["LatLng"](90,-180)};return t}});var s={skymapVec1:{url:"http://t0.tianditu.gov.cn/vec_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"vec",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapVec2:{url:"http://t0.tianditu.gov.cn/cva_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"cva",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapTopography1:{url:"http://t0.tianditu.gov.cn/ter_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"ter",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapTopography2:{url:"http://t0.tianditu.gov.cn/cta_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"cta",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapImage1:{url:"http://t0.tianditu.gov.cn/img_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"img",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}},skymapImage2:{url:"http://t0.tianditu.gov.cn/cia_c/wmts?tk=5f62055ba4a942589b724283706c399a",opt:{layer:"cia",tileMatrixSet:"c",format:"tiles",style:"default",type:"baseLayer"}}},n={};Object.keys(s).forEach((function(t){n[t]=r(s[t].url,s[t].opt)}))},d011:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"leaflet-map-container",class:t.defaultClass,style:t.defaultStyle,attrs:{id:t.id}},[t.ready?t._t("default"):t._e()],2)},r=[],s=(a("e11e"),a("d81d"),a("9f76"),{data:function(){return{originOptions:{crs:L.CRS.EPSG4326,zoomControl:!0,attributionControl:!1,center:[36.982253,106.1312172],zoom:4,minZoom:1,maxZoom:14,doubleClickZoom:!1},options:{},timer:null,timerNum:0,mymap:null,baseLayer:null,editLayer:null}},methods:{initMap:function(){this.mymap=L.map("map",this.options),this.baseLayer=L.featureGroup(),this.mymap.addLayer(this.baseLayer),this.editLayer=L.featureGroup(),this.mymap.addLayer(this.editLayer)},ensureMapDom:function(){var t=this,e=this.id,a=document.getElementById(e);a?this.initMap():this.$nextTick((function(){if(t.timerNum>=10)return!1;t.timer((function(){t.ensureMapDom(),t.timerNum++}),100)}))}},mounted:function(){this.options=L.extend({},this.originOptions,this.$attrs),this.ensureMapDom()},beforeDestroy:function(){this.timer&&clearTimeout(this.timer),this.mymap&&this.mymap.remove()}}),n={inheritAttrs:!1,mixins:[s],props:{id:{type:String,default:"map",require:!0},defaultStyle:{default:function(){return{border:"1px solid #ccc"}}},defaultClass:{default:function(){return""}}},data:function(){return{ready:!1}},methods:{getMap:function(){return this.mymap},getBaseLayer:function(){return this.baseLayer},getEditLayer:function(){return this.editLayer},getAllLayer:function(){return{map:this.mymap,baseLayer:this.baseLayer,editLayer:this.editLayer}}},mounted:function(){this.ready=!0,this.$emit("ready",this.mymap)}},o=n,l=o,c=(a("d098"),a("2877")),u=Object(c["a"])(l,i,r,!1,null,null,null);e["a"]=u.exports},d098:function(t,e,a){"use strict";a("1f32")},fb86:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"self-leaflet-base-layer",style:t.baseStyle},[this.showChangeBtn?t._l(t.showChangeBtnArr,(function(e,i){return a("div",{key:"baseType-"+i,staticClass:"base-layer-btn",on:{click:function(a){return t.handleChangeBase(e)}}},[t._t(e,[a("div",{staticClass:"btn-image",class:["btn-image-"+e,t.currentBaseType==e?"current-active":""]},[a("div",{staticClass:"btn-txt"},[t._v(t._s(t.baseLayerType[e]))])])],{scope:e})],2)})):t._e()],2)},r=[],s=(a("4de4"),a("9f76")),n={data:function(){return{parentMap:null,baseLayer:null}},methods:{changeBaseType:function(t){this.baseLayer.clearLayers(),s["a"][t]&&this.baseLayer.addLayer(s["a"][t]),s["a"][t+"1"]&&this.baseLayer.addLayer(s["a"][t+"1"]),s["a"][t+"2"]&&this.baseLayer.addLayer(s["a"][t+"2"])}},mounted:function(){this.parentMap=this.$parent,this.baseLayer=this.parentMap.getBaseLayer()}},o={mixins:[n],name:"baseLayer",props:{baseStyle:{default:function(){return{position:"absolute",right:"10px",top:"10px"}}},showChangeBtn:{default:!1},baseType:{type:Array,default:function(){return["skymapVec"]}}},data:function(){return{baseLayerType:{skymapVec:"矢量",skymapTopography:"地形",skymapImage:"影像"},currentBaseType:""}},computed:{showChangeBtnArr:function(){var t=this;return this.baseType.filter((function(e){return t.baseLayerType[e]}))}},methods:{handleChangeBase:function(t){this.currentBaseType=t,this.changeBaseType(t)},getBaseLayer:function(){return this.baseLayer}},mounted:function(){if(this.showChangeBtnArr.length>0){var t=this.showChangeBtnArr[0];this.currentBaseType=t,this.changeBaseType(t)}else this.$alert("请传入有效的底图类型","提示")}},l=o,c=(a("4821"),a("2877")),u=Object(c["a"])(l,i,r,!1,null,null,null);e["a"]=u.exports}}]);
//# sourceMappingURL=chunk-459d9a7c.7bbd9588.js.map